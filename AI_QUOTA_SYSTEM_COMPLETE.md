# ‚úÖ –°–∏—Å—Ç–µ–º–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∫–≤–æ—Ç –ò–ò –≥–æ—Ç–æ–≤–∞!

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∫–≤–æ—Ç**
- ‚úÖ –°–±—Ä–æ—Å –∫–≤–æ—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ Graceful shutdown –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞

### 2. **–°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤**
- ‚úÖ **–û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å
- ‚úÖ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã:** 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –ò–ò –∑–∞–ø—Ä–æ—Å–æ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ "ü§ñ –õ–∏–º–∏—Ç—ã –ò–ò"
- ‚úÖ –ü–æ–∫–∞–∑ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –æ—Å—Ç–∞—Ç–∫–∞
- ‚úÖ –í—Ä–µ–º—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–±—Ä–æ—Å–∞
- ‚úÖ –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö**
- ‚úÖ `gpt_explain_callback` - —Ä–∞–∑–±–æ—Ä —Å—Ç–∏—Ö–æ–≤ –ò–ò
- ‚úÖ `process_problem_description` - –ò–ò –ø–æ–º–æ—â–Ω–∏–∫
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `services/ai_quota_manager.py` - –º–µ–Ω–µ–¥–∂–µ—Ä –∫–≤–æ—Ç —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `bot.py` - –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- `handlers/settings.py` - —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–≤–æ—Ç–∞—Ö
- `handlers/text_messages.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç –≤ gpt_explain
- `handlers/ai_assistant.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç –≤ –ò–ò –ø–æ–º–æ—â–Ω–∏–∫–µ

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
```python
DEFAULT_DAILY_LIMIT = 10      # –õ–∏–º–∏—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
ADMIN_DAILY_LIMIT = 1000      # –õ–∏–º–∏—Ç –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
QUOTA_RESET_HOUR = 0          # –ß–∞—Å —Å–±—Ä–æ—Å–∞ (00:00 UTC)
```

## üéÆ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∫–≤–æ—Ç:
1. **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
2. **–í—ã—á–∏—Å–ª—è–µ—Ç** –≤—Ä–µ–º—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–±—Ä–æ—Å–∞ (00:00 UTC)
3. **–ñ–¥–µ—Ç** –¥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–±—Ä–æ—Å–∞
4. **–õ–æ–≥–∏—Ä—É–µ—Ç** —Å–æ–±—ã—Ç–∏–µ —Å–±—Ä–æ—Å–∞ (–æ—á–∏—Å—Ç–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –ø–æ –¥–Ω—è–º)
5. **–ü–æ–≤—Ç–æ—Ä—è–µ—Ç** —Ü–∏–∫–ª

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç:
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ò–ò —Ä–∞–∑–±–æ—Ä
2. **–°–∏—Å—Ç–µ–º–∞** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
3. **–ï—Å–ª–∏ –ª–∏–º–∏—Ç –Ω–µ –ø—Ä–µ–≤—ã—à–µ–Ω** - —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å
4. **–ï—Å–ª–∏ –ª–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–≤–æ—Ç:
```
üìä –í–∞—à–∏ –ª–∏–º–∏—Ç—ã –ò–ò

üë§ –¢–∏–ø: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
üóìÔ∏è –°–µ–≥–æ–¥–Ω—è (2025-01-27):
‚Ä¢ –õ–∏–º–∏—Ç: 10 –∑–∞–ø—Ä–æ—Å–æ–≤
‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 7
‚Ä¢ –û—Å—Ç–∞–ª–æ—Å—å: 3

‚è∞ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: —á–µ—Ä–µ–∑ 8 —á.
üîÑ –õ–∏–º–∏—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC
```

## üöÄ –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
```
INFO:services.ai_quota_manager:üîÑ –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ —Å–±—Ä–æ—Å–∞ –∫–≤–æ—Ç –ò–ò
INFO:services.ai_quota_manager:‚è∞ –°–ª–µ–¥—É—é—â–∏–π —Å–±—Ä–æ—Å –∫–≤–æ—Ç: 2025-01-28 00:00:00 UTC
INFO:services.ai_quota_manager:‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ 28800 —Å–µ–∫—É–Ω–¥ –¥–æ —Å–±—Ä–æ—Å–∞
INFO:bot:‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∫–≤–æ—Ç –ò–ò –∑–∞–ø—É—â–µ–Ω
```

### –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏:
```
INFO:services.ai_quota_manager:‚úÖ –ò–ò –∑–∞–ø—Ä–æ—Å –∑–∞—Å—á–∏—Ç–∞–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 8/10
WARNING:services.ai_quota_manager:‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456 –ø—Ä–µ–≤—ã—Å–∏–ª –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –ò–ò
```

### –ü—Ä–∏ —Å–±—Ä–æ—Å–µ:
```
INFO:services.ai_quota_manager:üîÑ –°–±—Ä–æ—Å –∫–≤–æ—Ç –ò–ò –Ω–∞ 2025-01-28
INFO:services.ai_quota_manager:‚úÖ –ö–≤–æ—Ç—ã —Å–±—Ä–æ—à–µ–Ω—ã –Ω–∞ 2025-01-28
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- üéØ **–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** —Ä–µ—Å—É—Ä—Å–æ–≤ –ò–ò
- üìä **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤–∏–¥—è—Ç —Å–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- ‚è∞ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** - –∑–Ω–∞—é—Ç, –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤—è—Ç—Å—è –ª–∏–º–∏—Ç—ã
- üí° **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã** - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
- üí∞ **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞—Å—Ö–æ–¥–æ–≤** –Ω–∞ –ò–ò API
- üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üõ°Ô∏è **–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π**
- ‚öôÔ∏è **–ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –ª–∏–º–∏—Ç–æ–≤

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- üìä **–¢–æ—á–Ω—ã–π —É—á–µ—Ç** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- üöÄ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** –¥–ª—è –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üõ†Ô∏è **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –∫–≤–æ—Ç –ò–ò –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ —Å–∏—Å—Ç–µ–º–∞ –∫–≤–æ—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** üöÄ
# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–ª–∞–¥–æ–∫ –≤ v2.8.1

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Supabase SDK –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–∫–ª–∞–¥–æ–∫:
```
KeyError: 0
bookmark_exists = any(bm[0] == book_id and bm[1] == chapter for bm in bookmarks)
```

## üîç –ü—Ä–∏—á–∏–Ω–∞
–ö–æ–¥ –ø—ã—Ç–∞–ª—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∑–∞–∫–ª–∞–¥–∫–∞–º –∫–∞–∫ –∫ –∫–æ—Ä—Ç–µ–∂–∞–º (`bm[0]`, `bm[1]`), –Ω–æ Supabase –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ —Å–ª–æ–≤–∞—Ä–∏ —Å –∫–ª—é—á–∞–º–∏ `book_id`, `chapter`, `display_text`.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. **`handlers/bookmark_callbacks.py`** - 3 –º–µ—Å—Ç–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–∫–ª–∞–¥–æ–∫
2. **`handlers/commands.py`** - 2 –º–µ—Å—Ç–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–∫–ª–∞–¥–æ–∫  
3. **`handlers/bookmarks.py`** - 1 –º–µ—Å—Ç–æ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–∫–ª–∞–¥–æ–∫
4. **`keyboards/main.py`** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–≤–∞—Ä–µ–π –¥–ª—è –∫–Ω–æ–ø–æ–∫

### –î–æ–±–∞–≤–ª–µ–Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤:
```python
# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
if bookmarks:
    if isinstance(bookmarks[0], dict):
        # –§–æ—Ä–º–∞—Ç —Å–ª–æ–≤–∞—Ä—è (Supabase/PostgreSQL)
        bookmark_exists = any(bm['book_id'] == book_id and bm['chapter'] == chapter for bm in bookmarks)
    else:
        # –§–æ—Ä–º–∞—Ç –∫–æ—Ä—Ç–µ–∂–∞ (SQLite)
        bookmark_exists = any(bm[0] == book_id and bm[1] == chapter for bm in bookmarks)
else:
    bookmark_exists = False
```

## üê≥ Docker –æ–±—Ä–∞–∑ v2.8.1

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –∑–∞–∫–ª–∞–¥–∫–∞–º–∏ –≤ Supabase
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö (SQLite, PostgreSQL, Supabase)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.supabase-sdk.yml down
docker-compose -f docker-compose.supabase-sdk.yml pull
docker-compose -f docker-compose.supabase-sdk.yml up -d

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
docker pull probedrik/gospel-bot:v2.8.1
```

## üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–æ–∫
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–ª–∞–¥–æ–∫  
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞–∫–ª–∞–¥–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–∫–ª–∞–¥–æ–∫
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –ø–ª–∞–Ω–∞–º–∏ —á—Ç–µ–Ω–∏—è

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
1. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–∫–ª–∞–¥–∫—É —á–µ—Ä–µ–∑ –±–æ—Ç–∞
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–∫–ª–∞–¥–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—à–∏–±–∫–∞ `KeyError: 0` –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç

**–¢–µ–ø–µ—Ä—å –∑–∞–∫–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö!** ‚úÖ 
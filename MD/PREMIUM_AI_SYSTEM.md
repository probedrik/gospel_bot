# ‚≠ê –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø–∞ –∫ –ò–ò –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø–∞ –∫ –ò–ò –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ÆKassa.

### ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **‚≠ê –ü—Ä–µ–º–∏—É–º –ò–ò –ø–æ–º–æ—â–Ω–∏–∫** - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–æ–¥–µ–ª—å —Å –≥–ª—É–±–æ–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º
2. **üß† –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ò–ò** - –æ–±—ã—á–Ω—ã–π –∏ –ø—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø
3. **ü™ô –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞
4. **üí≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ .env –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üß† –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –ò–ò –ø–æ–º–æ—â–Ω–∏–∫–∞–º–∏:

#### ü§ñ –û–±—ã—á–Ω—ã–π –ò–ò (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã):
- **–ú–æ–¥–µ–ª—å:** Mistral Small (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è)
- **–û—Ç–≤–µ—Ç—ã:** –î–æ 2048 —Å–∏–º–≤–æ–ª–æ–≤
- **–°—Ç–∏–ª—å:** –ö—Ä–∞—Ç–∫–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- **–†–æ–ª—å:** –ë–∞–∑–æ–≤—ã–π –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π –±–æ–≥–æ—Å–ª–æ–≤

#### ‚≠ê –ü—Ä–µ–º–∏—É–º –ò–ò (–ø–ª–∞—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã):
- **–ú–æ–¥–µ–ª—å:** Claude 3.5 Sonnet (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è)
- **–û—Ç–≤–µ—Ç—ã:** –î–æ 3996 —Å–∏–º–≤–æ–ª–æ–≤
- **–°—Ç–∏–ª—å:** –ü–æ–¥—Ä–æ–±–Ω—ã–π –±–æ–≥–æ—Å–ª–æ–≤—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- **–†–æ–ª—å:** –í—ã–¥–∞—é—â–∏–π—Å—è –±–æ–≥–æ—Å–ª–æ–≤ —Å –∑–Ω–∞–Ω–∏–µ–º –¥—Ä–µ–≤–Ω–∏—Ö —è–∑—ã–∫–æ–≤
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Å–≤—è—Ç–æ–æ—Ç–µ—á–µ—Å–∫–∏–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:

- `services/premium_manager.py` - –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π
- `database/premium_requests_schema.sql` - —Å—Ö–µ–º–∞ –ë–î –¥–ª—è –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π
- `PREMIUM_AI_SYSTEM.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- `config/ai_settings.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—ã—á–Ω–æ–≥–æ –∏ –ø—Ä–µ–º–∏—É–º –ò–ò
- `utils/api_client.py` - —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∏ –ø—Ä–µ–º–∏—É–º –ò–ò
- `keyboards/settings.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø—Ä–µ–º–∏—É–º –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π
- `handlers/settings.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π
- `services/ai_quota_manager.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å–∞–º–∏
- `handlers/text_messages.py` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –ò–ò
- `.env.example` - –ø—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

#### `premium_requests`
```sql
- id (SERIAL PRIMARY KEY)
- user_id (BIGINT) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- requests_count (INTEGER) - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- total_purchased (INTEGER) - –≤—Å–µ–≥–æ –∫—É–ø–ª–µ–Ω–æ
- total_used (INTEGER) - –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ
- created_at, updated_at (TIMESTAMP)
```

#### `premium_purchases`
```sql
- id (SERIAL PRIMARY KEY)
- user_id (BIGINT) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- requests_count (INTEGER) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- amount_rub (INTEGER) - —Å—É–º–º–∞ –≤ —Ä—É–±–ª—è—Ö
- payment_id (VARCHAR) - ID –ø–ª–∞—Ç–µ–∂–∞ –ÆKassa
- payment_status (VARCHAR) - —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
- created_at, completed_at (TIMESTAMP)
```

#### `donations`
```sql
- id (SERIAL PRIMARY KEY)
- user_id (BIGINT) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- amount_rub (INTEGER) - —Å—É–º–º–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è
- payment_id (VARCHAR) - ID –ø–ª–∞—Ç–µ–∂–∞ –ÆKassa
- payment_status (VARCHAR) - —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
- message (TEXT) - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∂–µ—Ä—Ç–≤–æ–≤–∞—Ç–µ–ª—è
- created_at, completed_at (TIMESTAMP)
```

## üéÆ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí ü§ñ –õ–∏–º–∏—Ç—ã –ò–ò

**–ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏:**
- `‚≠ê –ü—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø –∫ –ò–ò` - –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ø–æ–∫—É–ø–∫–µ –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚≠ê –ü—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø –∫ –ò–ò

**–ö–Ω–æ–ø–∫–∏:**
- `‚≠ê –ö—É–ø–∏—Ç—å +50 –∑–∞–ø—Ä–æ—Å–æ–≤ (100‚ÇΩ)` - –ø–æ–∫—É–ø–∫–∞ –ø—Ä–µ–º–∏—É–º –ø–∞–∫–µ—Ç–∞
- `üìä –ú–æ–∏ –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å—ã` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `‚ÑπÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–µ–º–∏—É–º` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

**–ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞:**
- `ü™ô –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### ü™ô –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è

**–ö–Ω–æ–ø–∫–∏:**
- `ü™ô 50‚ÇΩ`, `ü™ô 100‚ÇΩ`, `ü™ô 500‚ÇΩ` - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—É–º–º—ã
- `üí∞ –í–≤–µ—Å—Ç–∏ —Å—É–º–º—É` - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—É–º–º–∞
- `‚ÑπÔ∏è –û –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è—Ö` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

### üîë –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```env
# –ò–ò –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –ø—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø
OPENROUTER_PREMIUM_API_KEY=your_premium_api_key
OPENROUTER_PREMIUM_MODEL=anthropic/claude-3.5-sonnet

# –ÆKassa –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
YOOKASSA_WEBHOOK_SECRET=your_webhook_secret
```

### üìã –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏:

**–û–±—ã—á–Ω—ã–π –ò–ò:**
- `mistralai/mistral-small-3.1-24b-instruct:free` (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è)
- `google/gemma-2-9b-it:free` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

**–ü—Ä–µ–º–∏—É–º –ò–ò:**
- `anthropic/claude-3.5-sonnet` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `openai/gpt-4o` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- `google/gemini-pro-1.5` (—ç–∫–æ–Ω–æ–º–∏—á–Ω–∞—è)

## üîß –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### ü§ñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ò–ò –∑–∞–ø—Ä–æ—Å–æ–≤

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ã—á–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π –ò–ò (Mistral)
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** - –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–µ–º–∏—É–º –ò–ò (Claude)
3. **–û—Ç–∫–∞–∑ –≤ –¥–æ—Å—Ç—É–ø–µ** - –µ—Å–ª–∏ –≤—Å–µ –ª–∏–º–∏—Ç—ã –∏—Å—á–µ—Ä–ø–∞–Ω—ã

### üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ò–ò:

```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "ü§ñ –†–∞–∑–±–æ—Ä –æ—Ç –ò–ò"
can_use_ai, ai_type = await ai_quota_manager.check_and_increment_usage(user_id)

if ai_type == 'regular':
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π –ò–ò
    response = await ask_gpt_explain(prompt)
    title = "ü§ñ –†–∞–∑–±–æ—Ä –æ—Ç –ò–ò"
elif ai_type == 'premium':
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–µ–º–∏—É–º –ò–ò
    response = await ask_gpt_explain_premium(prompt)
    title = "‚≠ê –ü—Ä–µ–º–∏—É–º —Ä–∞–∑–±–æ—Ä –æ—Ç –ò–ò"
```

### ‚≠ê –ü—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–ù–µ —Å–≥–æ—Ä–∞—é—Ç** - –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ù–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è** - –º–æ–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Å–ª–µ –¥–Ω–µ–≤–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üí≥ –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã (TODO)

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è payment_id –≤ –ÆKassa
2. **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É
3. **Webhook** - –ÆKassa —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–µ –ø–ª–∞—Ç–µ–∂–∞
4. **–ó–∞—á–∏—Å–ª–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤/–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è

## üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ "üìà –ú–æ–π –ª–∏–º–∏—Ç":

```
üìä –í–∞—à–∏ –ª–∏–º–∏—Ç—ã –ò–ò

üë§ –¢–∏–ø: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
üóìÔ∏è –°–µ–≥–æ–¥–Ω—è (2024-01-15):
‚Ä¢ –î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç: 3 –∑–∞–ø—Ä–æ—Å–∞
‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 2
‚Ä¢ –û—Å—Ç–∞–ª–æ—Å—å: 1
‚≠ê –ü—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å—ã: 15
‚Ä¢ –í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ: 16

‚è∞ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: —á–µ—Ä–µ–∑ 8 —á.
üîÑ –î–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤ 00:00 UTC
‚≠ê –ü—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å—ã –Ω–µ —Å–≥–æ—Ä–∞—é—Ç
```

## üîå API –º–µ—Ç–æ–¥—ã

### PremiumManager

```python
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å–æ–≤
await premium_manager.get_user_premium_requests(user_id)

# –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å—ã
await premium_manager.add_premium_requests(user_id, count)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å
await premium_manager.use_premium_request(user_id)

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
await premium_manager.get_user_premium_stats(user_id)

# –°–æ–∑–¥–∞—Ç—å –ø–æ–∫—É–ø–∫—É
await premium_manager.create_premium_purchase(user_id, count, amount, payment_id)

# –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–∫—É–ø–∫—É
await premium_manager.complete_premium_purchase(payment_id)

# –°–æ–∑–¥–∞—Ç—å –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ
await premium_manager.create_donation(user_id, amount, payment_id, message)

# –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ
await premium_manager.complete_donation(payment_id)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π AIQuotaManager

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ (–≤–∫–ª—é—á–∞—è –ø—Ä–µ–º–∏—É–º)
await ai_quota_manager.check_and_increment_usage(user_id)

# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–≤–æ—Ç–∞—Ö (–≤–∫–ª—é—á–∞—è –ø—Ä–µ–º–∏—É–º)
quota_info = await ai_quota_manager.get_user_quota_info(user_id)
# –ù–æ–≤—ã–µ –ø–æ–ª—è: premium_requests, total_available
```

## üöÄ –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI quota manager
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa API
- üîÑ Webhook –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- üîÑ –í–≤–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Å—É–º–º—ã –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è
- üîÑ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–ª–∞—Ç–µ–∂–∞—Ö

### üìã TODO:
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è payment gateway
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- [ ] –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞–º–∏
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- üéØ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∑–∞—Ä–∞–Ω–µ–µ
- üí∞ **–≠–∫–æ–Ω–æ–º–∏—è** - –≤—ã–≥–æ–¥–Ω–∞—è —Ü–µ–Ω–∞ –∑–∞ –ø–∞–∫–µ—Ç
- ‚è∞ **–£–¥–æ–±—Å—Ç–≤–æ** - –∑–∞–ø—Ä–æ—Å—ã –Ω–µ —Å–≥–æ—Ä–∞—é—Ç
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –ÆKassa

### –î–ª—è –ø—Ä–æ–µ–∫—Ç–∞:
- üíµ **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥
- üìà **–†–∞–∑–≤–∏—Ç–∏–µ** - —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è
- ü§ù **–°–æ–æ–±—â–µ—Å—Ç–≤–æ** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–∞–Ω–Ω—ã–µ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø–∞ –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º —à–ª—é–∑–æ–º –ÆKassa.
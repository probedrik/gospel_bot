# üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:

1. **üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
2. **üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —Å—Ö–µ–º—ã —Å–æ–∑–¥–∞–Ω—ã
3. **üéÆ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –∏ –º–µ–Ω—é
4. **üîß –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** - –º–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
5. **üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–ò** - —É—á–µ—Ç –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å–æ–≤

## üîÑ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. üìã –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∏–∑ —Ñ–∞–π–ª–∞:
psql -d your_database -f database/premium_requests_schema.sql
```

### 2. üîë –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ÆKassa

**–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:**
- `SHOP_ID` - ID –º–∞–≥–∞–∑–∏–Ω–∞
- `SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
- `WEBHOOK_URL` - URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–î–æ–±–∞–≤–∏—Ç—å –≤ config/settings.py:**
```python
# –ÆKassa –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
YOOKASSA_SHOP_ID = "your_shop_id"
YOOKASSA_SECRET_KEY = "your_secret_key"
YOOKASSA_WEBHOOK_SECRET = "your_webhook_secret"
```

### 3. üí≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑

**–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `services/payment_service.py`:**
```python
from yookassa import Configuration, Payment

Configuration.account_id = YOOKASSA_SHOP_ID
Configuration.secret_key = YOOKASSA_SECRET_KEY

async def create_payment(amount: int, description: str, user_id: int):
    # –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –≤ –ÆKassa
    pass

async def check_payment_status(payment_id: str):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞
    pass
```

### 4. üîó –î–æ–±–∞–≤–∏—Ç—å webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

**–í bot.py –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ:**
```python
@app.post("/yookassa-webhook")
async def yookassa_webhook(request):
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –ÆKassa
    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫ –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π
    pass
```

### 5. üîÑ –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫

**–í handlers/settings.py –∑–∞–º–µ–Ω–∏—Ç—å TODO –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É:**
```python
@router.callback_query(F.data == "buy_premium_ai_50")
async def buy_premium_ai_50(callback: CallbackQuery, state: FSMContext):
    # –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂ –≤ –ÆKassa
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É
    pass
```

## üì¶ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install yookassa
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. **–¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sandbox –ÆKassa
2. **Webhook —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - ngrok –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏** - –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—É–ø–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç:
- ‚≠ê –ü–æ–∫—É–ø–∞—Ç—å –ø—Ä–µ–º–∏—É–º –∑–∞–ø—Ä–æ—Å—ã –∫ –ò–ò (100‚ÇΩ –∑–∞ 50 –∑–∞–ø—Ä–æ—Å–æ–≤)
- ü™ô –î–µ–ª–∞—Ç—å –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è (50‚ÇΩ, 100‚ÇΩ, 500‚ÇΩ, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—É–º–º–∞)
- üí≥ –û–ø–ª–∞—á–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ÆKassa (–∫–∞—Ä—Ç—ã, –°–ë–ü, –∫–æ—à–µ–ª—å–∫–∏)
- üìä –í–∏–¥–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–≤–æ–∏—Ö –ø–æ–∫—É–ø–æ–∫ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üí° –ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏!

–í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑ –ÆKassa.
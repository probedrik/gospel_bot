# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–ª–æ–∂–Ω—ã—Ö –±–∏–±–ª–µ–π—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ó–∞–∫–ª–∞–¥–∫–∞ –¥–ª—è "–ë—ã—Ç 6:1-7:24" —Å–æ—Ö—Ä–∞–Ω—è–ª–∞—Å—å –∫–∞–∫ "–ë—ã—Ç 6:1-7" –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã.

## üîç –ü—Ä–∏—á–∏–Ω–∞
–í `reading_plan_text` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–æ –¥–∏–∞–ø–∞–∑–æ–Ω—ã —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã:

```python
# –°–¢–ê–†–û–ï (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ) —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ:
r"([–ê-–Ø–∞-—è—ë–Å0-9\s]+)\s(\d+)(?::(\d+)(?:-(\d+))?)?"

# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–æ —Ç–æ–ª—å–∫–æ:
# - "–ë—ã—Ç 6" (–≥–ª–∞–≤–∞)
# - "–ë—ã—Ç 6:1" (—Å—Ç–∏—Ö)  
# - "–ë—ã—Ç 6:1-7" (–¥–∏–∞–ø–∞–∑–æ–Ω —Å—Ç–∏—Ö–æ–≤ –≤ –æ–¥–Ω–æ–π –≥–ª–∞–≤–µ)

# –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–æ:
# - "–ë—ã—Ç 6:1-7:24" (–¥–∏–∞–ø–∞–∑–æ–Ω —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã)
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ó–∞–º–µ–Ω–µ–Ω –ø—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π `parse_reference`

–í `handlers/text_messages.py` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `reading_plan_text`:

```python
# –ë–´–õ–û:
import re
match = re.match(r"([–ê-–Ø–∞-—è—ë–Å0-9\s]+)\s(\d+)(?::(\d+)(?:-(\d+))?)?", reading_part)
if match:
    book_raw = match.group(1).strip().lower()
    chapter = int(match.group(2))
    verse_start = match.group(3)
    verse_end = match.group(4) if match.group(4) else verse_start

# –°–¢–ê–õ–û:
from handlers.verse_reference import parse_reference

book_name, chapter_or_range, verse_or_range = parse_reference(reading_part)

if book_name:
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Å—Å—ã–ª–∫–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∑–∞–∫–ª–∞–¥–∫–∏
    if chapter_or_range == "cross_chapter_range":
        # –î–∏–∞–ø–∞–∑–æ–Ω —Å—Ç–∏—Ö–æ–≤ —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã: –ë—ã—Ç 6:1-7:24
        start_chapter, start_verse, end_chapter, end_verse = verse_or_range
        chapter_start = start_chapter
        chapter_end = end_chapter
        verse_start = start_verse
        verse_end = end_verse
    # ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞

### –¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã:

1. **"–ë—ã—Ç 6:1-7:24"** (–¥–∏–∞–ø–∞–∑–æ–Ω —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã):
   - `chapter_start: 6`
   - `chapter_end: 7`
   - `verse_start: 1`
   - `verse_end: 24`
   - `display_text: "–ë—ã—Ç 6:1-7:24"` ‚úÖ

2. **"–ë—ã—Ç 1-3"** (–¥–∏–∞–ø–∞–∑–æ–Ω –≥–ª–∞–≤):
   - `chapter_start: 1`
   - `chapter_end: 3`
   - `verse_start: None`
   - `verse_end: None`
   - `display_text: "–ë—ã—Ç 1-3"` ‚úÖ

3. **"–ò–Ω 3:16-18"** (–¥–∏–∞–ø–∞–∑–æ–Ω —Å—Ç–∏—Ö–æ–≤):
   - `chapter_start: 3`
   - `chapter_end: None`
   - `verse_start: 16`
   - `verse_end: 18`
   - `display_text: "–ò–Ω 3:16-18"` ‚úÖ

4. **"–ò–Ω 3:16"** (–æ–¥–∏–Ω —Å—Ç–∏—Ö):
   - `chapter_start: 3`
   - `verse_start: 16`
   - `display_text: "–ò–Ω 3:16"` ‚úÖ

5. **"–ò–Ω 3"** (–≤—Å—è –≥–ª–∞–≤–∞):
   - `chapter_start: 3`
   - `display_text: "–ò–Ω 3"` ‚úÖ

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –¢–µ–ø–µ—Ä—å –∑–∞–∫–ª–∞–¥–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- **–ü–ª–∞–Ω—ã —á—Ç–µ–Ω–∏—è** —Å –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–í—Å–µ —Ç–∏–ø—ã —Å—Å—ã–ª–æ–∫** –ø–∞—Ä—Å—è—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **Display text** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é

### üì± –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–ª–∞–¥–æ–∫:
- ‚úÖ "–ë—ã—Ç 6:1-7:24" ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ "–ë—ã—Ç 6:1-7:24" (–Ω–µ "–ë—ã—Ç 6:1-7")
- ‚úÖ "–ú—Ñ 5:3-7:29" ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ "–ú—Ñ 5:3-7:29"
- ‚úÖ "–õ–∫ 1:1-2:52" ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ "–õ–∫ 1:1-2:52"

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `parse_reference`:
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã –±–∏–±–ª–µ–π—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—ã —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–∫–ª–∞–¥–æ–∫

### –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —Å—Å—ã–ª–∫–∏:
```python
if chapter_or_range == "chapter_range":
    # –î–∏–∞–ø–∞–∑–æ–Ω –≥–ª–∞–≤: –ë—ã—Ç 1-3
elif chapter_or_range == "cross_chapter_range":
    # –î–∏–∞–ø–∞–∑–æ–Ω —Å—Ç–∏—Ö–æ–≤ —á–µ—Ä–µ–∑ –≥–ª–∞–≤—ã: –ë—ã—Ç 1:1-2:25
elif isinstance(verse_or_range, tuple):
    # –î–∏–∞–ø–∞–∑–æ–Ω —Å—Ç–∏—Ö–æ–≤ –≤ –æ–¥–Ω–æ–π –≥–ª–∞–≤–µ: –ë—ã—Ç 1:1-5
elif isinstance(verse_or_range, int):
    # –û–¥–∏–Ω —Å—Ç–∏—Ö: –ë—ã—Ç 1:1
elif verse_or_range is None:
    # –í—Å—è –≥–ª–∞–≤–∞: –ë—ã—Ç 1
```

## üéâ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!

**–¢–µ–ø–µ—Ä—å –≤—Å–µ —Å–ª–æ–∂–Ω—ã–µ –±–∏–±–ª–µ–π—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏ –∏–∑ –ø–ª–∞–Ω–æ–≤ —á—Ç–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∑–∞–∫–ª–∞–¥–∫–∏ —Å –ø–æ–ª–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º!** üéØ

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–ª–∞–Ω —á—Ç–µ–Ω–∏—è
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç—Ä—ã–≤–æ–∫ —Ç–∏–ø–∞ "–ë—ã—Ç 6:1-7:24"
3. –ù–∞–∂–º–∏—Ç–µ "üìå –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ "üìù –ú–æ–∏ –∑–∞–∫–ª–∞–¥–∫–∏" - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "–ë—ã—Ç 6:1-7:24"

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ